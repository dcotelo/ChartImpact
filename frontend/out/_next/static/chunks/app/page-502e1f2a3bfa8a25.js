(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2620:function(e,r,t){Promise.resolve().then(t.bind(t,3368))},3368:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return b}});var o=t(7437),n=t(2265);let i=t(257).env.NEXT_PUBLIC_API_URL||"http://localhost:8080",s={compare:"".concat(i,"/api/compare"),versions:"".concat(i,"/api/versions")},a={repository:"",chartPath:"charts/app",version1:"",version2:"",valuesFile:"",valuesContent:"",ignoreLabels:!1};function l(e){let{onSubmit:r,loading:t,initialData:i}=e,[l,d]=(0,n.useState)(()=>i||a),[c,m]=(0,n.useState)([]),[p,u]=(0,n.useState)(!1),[h,g]=(0,n.useState)(null);(0,n.useEffect)(()=>{i?d({repository:i.repository||"",chartPath:i.chartPath||"charts/app",version1:i.version1||"",version2:i.version2||"",valuesFile:i.valuesFile||"",valuesContent:i.valuesContent||"",ignoreLabels:i.ignoreLabels||!1}):d({...a})},[i]);let f=(0,n.useCallback)(async e=>{if(!e||!e.match(/^(https?:\/\/|git@)/)){m([]),g(null);return}u(!0),g(null);try{let r=await fetch(s.versions,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({repository:e})}),t=await r.json();if(t.success){let e=[...t.tags||[],...t.branches||[]].filter(e=>e&&e.trim().length>0);e.length>0?(m(e),g(null)):(m([]),g("No tags or branches found in repository"))}else m([]),g(t.error||"Failed to fetch versions")}catch(e){console.error("Error fetching versions:",e),m([]),g(e.message||"Failed to fetch versions")}finally{u(!1)}},[]);return(0,n.useEffect)(()=>{let e=setTimeout(()=>{l.repository?f(l.repository):(m([]),g(null))},1e3);return()=>clearTimeout(e)},[l.repository,f]),(0,o.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r(l)},style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Repository URL *"}),(0,o.jsx)("input",{type:"text",value:l.repository,onChange:e=>d({...l,repository:e.target.value}),placeholder:"https://github.com/user/repo.git",required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"1rem"}})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Chart Path *"}),(0,o.jsx)("input",{type:"text",value:l.chartPath,onChange:e=>d({...l,chartPath:e.target.value}),placeholder:"charts/datadog or charts/datadog-operator",required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"1rem"}}),(0,o.jsxs)("small",{style:{color:"#666",fontSize:"0.875rem",display:"block",marginTop:"0.25rem"},children:["Path to the Helm chart directory within the repository. For monorepos, use patterns like:",(0,o.jsx)("br",{}),(0,o.jsx)("code",{style:{fontSize:"0.8rem",background:"#f5f5f5",padding:"0.1rem 0.3rem",borderRadius:"3px"},children:"charts/<chart-name>"})," ","(e.g., ",(0,o.jsx)("code",{style:{fontSize:"0.8rem",background:"#f5f5f5",padding:"0.1rem 0.3rem",borderRadius:"3px"},children:"charts/datadog"}),")"]})]}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Version 1 (Tag/Commit) *"}),(0,o.jsx)("div",{style:{position:"relative"},children:p?(0,o.jsxs)("div",{style:{position:"relative",width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"1rem",backgroundColor:"#f5f5f5",color:"#999",display:"flex",alignItems:"center",gap:"0.5rem",cursor:"not-allowed"},children:[(0,o.jsx)("span",{style:{display:"inline-block",width:"16px",height:"16px",border:"2px solid #e0e0e0",borderTopColor:"#667eea",borderRadius:"50%",animation:"spin 0.8s linear infinite",flexShrink:0}}),(0,o.jsx)("span",{children:"Loading versions..."})]}):c.length>0?(0,o.jsxs)("select",{value:l.version1,onChange:e=>d({...l,version1:e.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"1rem",backgroundColor:"#fff",color:"#333",cursor:"pointer",appearance:"none",backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23666' d='M6 9L1 4h10z'/%3E%3C/svg%3E\")",backgroundRepeat:"no-repeat",backgroundPosition:"right 0.75rem center",paddingRight:"2.5rem"},children:[(0,o.jsx)("option",{value:"",children:"Select a version..."}),c.map((e,r)=>(0,o.jsx)("option",{value:e,children:e},"v1-".concat(r,"-").concat(e)))]}):(0,o.jsx)("input",{type:"text",value:l.version1,onChange:e=>d({...l,version1:e.target.value}),placeholder:"Enter version manually",required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"1rem",backgroundColor:"#fff"}})}),h&&(0,o.jsx)("small",{style:{color:"#d32f2f",fontSize:"0.75rem",display:"block",marginTop:"0.25rem"},children:h}),c.length>0&&!h&&!p&&(0,o.jsxs)("small",{style:{color:"#666",fontSize:"0.75rem",display:"block",marginTop:"0.25rem"},children:[c.length," version",1!==c.length?"s":""," available"]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Version 2 (Tag/Commit) *"}),(0,o.jsx)("div",{style:{position:"relative"},children:p?(0,o.jsxs)("div",{style:{position:"relative",width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"1rem",backgroundColor:"#f5f5f5",color:"#999",display:"flex",alignItems:"center",gap:"0.5rem",cursor:"not-allowed"},children:[(0,o.jsx)("span",{style:{display:"inline-block",width:"16px",height:"16px",border:"2px solid #e0e0e0",borderTopColor:"#667eea",borderRadius:"50%",animation:"spin 0.8s linear infinite",flexShrink:0}}),(0,o.jsx)("span",{children:"Loading versions..."})]}):c.length>0?(0,o.jsxs)("select",{value:l.version2,onChange:e=>d({...l,version2:e.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"1rem",backgroundColor:"#fff",color:"#333",cursor:"pointer",appearance:"none",backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23666' d='M6 9L1 4h10z'/%3E%3C/svg%3E\")",backgroundRepeat:"no-repeat",backgroundPosition:"right 0.75rem center",paddingRight:"2.5rem"},children:[(0,o.jsx)("option",{value:"",children:"Select a version..."}),c.map((e,r)=>(0,o.jsx)("option",{value:e,children:e},"v2-".concat(r,"-").concat(e)))]}):(0,o.jsx)("input",{type:"text",value:l.version2,onChange:e=>d({...l,version2:e.target.value}),placeholder:"Enter version manually",required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"1rem",backgroundColor:"#fff"}})}),h&&(0,o.jsx)("small",{style:{color:"#d32f2f",fontSize:"0.75rem",display:"block",marginTop:"0.25rem"},children:h}),c.length>0&&!h&&!p&&(0,o.jsxs)("small",{style:{color:"#666",fontSize:"0.75rem",display:"block",marginTop:"0.25rem"},children:[c.length," version",1!==c.length?"s":""," available"]})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Values File Path (Optional)"}),(0,o.jsx)("input",{type:"text",value:l.valuesFile,onChange:e=>d({...l,valuesFile:e.target.value}),placeholder:"values/prod.yaml",style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"1rem"}}),(0,o.jsx)("small",{style:{color:"#666",fontSize:"0.875rem"},children:"Path to values file within the repository (relative to repo root)"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#333"},children:"Or Paste Values Content (Optional)"}),(0,o.jsx)("textarea",{value:l.valuesContent,onChange:e=>d({...l,valuesContent:e.target.value}),placeholder:"replicaCount: 3 image: repository: nginx tag: latest",rows:6,style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"6px",fontSize:"1rem",fontFamily:"monospace"}}),(0,o.jsx)("small",{style:{color:"#666",fontSize:"0.875rem"},children:"YAML content for values file (takes precedence over values file path)"})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",userSelect:"none"},children:[(0,o.jsx)("input",{type:"checkbox",checked:l.ignoreLabels||!1,onChange:e=>d({...l,ignoreLabels:e.target.checked}),style:{width:"18px",height:"18px",cursor:"pointer"}}),(0,o.jsx)("span",{style:{fontWeight:"500",color:"#333"},children:"Ignore metadata/tag updates"})]}),(0,o.jsx)("small",{style:{color:"#666",fontSize:"0.875rem",display:"block",marginTop:"0.25rem",marginLeft:"1.75rem"},children:"Hide changes to labels and annotations (metadata updates that don't affect resource behavior)"})]}),(0,o.jsx)("button",{type:"submit",disabled:t,style:{padding:"0.875rem 2rem",background:t?"#ccc":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"6px",fontSize:"1rem",fontWeight:"600",cursor:t?"not-allowed":"pointer",transition:"opacity 0.2s"},children:t?"Comparing...":"Compare Versions"})]})}let d={Deployment:"Workloads",StatefulSet:"Workloads",DaemonSet:"Workloads",ReplicaSet:"Workloads",Job:"Workloads",CronJob:"Workloads",Pod:"Workloads",Service:"Services",Endpoints:"Services",EndpointSlice:"Services",Ingress:"Networking",IngressClass:"Networking",NetworkPolicy:"Networking",PersistentVolume:"Storage",PersistentVolumeClaim:"Storage",StorageClass:"Storage",VolumeAttachment:"Storage",ConfigMap:"Configuration",Secret:"Configuration",ServiceAccount:"RBAC",Role:"RBAC",RoleBinding:"RBAC",ClusterRole:"RBAC",ClusterRoleBinding:"RBAC",PodDisruptionBudget:"Policy",PodSecurityPolicy:"Policy",LimitRange:"Policy",ResourceQuota:"Policy",PriorityClass:"Policy",HorizontalPodAutoscaler:"Autoscaling",VerticalPodAutoscaler:"Autoscaling"},c=new Set(["Deployment","StatefulSet","DaemonSet","ReplicaSet","Job","CronJob","Pod","Service","Endpoints","EndpointSlice","Ingress","IngressClass","NetworkPolicy","PersistentVolume","PersistentVolumeClaim","StorageClass","VolumeAttachment","ConfigMap","Secret","ServiceAccount","Role","RoleBinding","ClusterRole","ClusterRoleBinding","PodDisruptionBudget","PodSecurityPolicy","LimitRange","ResourceQuota","PriorityClass","HorizontalPodAutoscaler","VerticalPodAutoscaler","Namespace","Node","Event","ComponentStatus","APIService","CustomResourceDefinition","MutatingWebhookConfiguration","ValidatingWebhookConfiguration","CertificateSigningRequest","Lease","CSIDriver","CSINode","CSIStorageCapacity","FlowSchema","PriorityLevelConfiguration","RuntimeClass","PodTemplate"]);function m(e,r){if(r&&d[r])return d[r];if(r&&!c.has(r))return"Custom Resources";let t=e.toLowerCase();return t.includes("metadata.labels")||t.includes("metadata.annotations")?"Metadata & Tags":t.includes(".status.")?"Status":t.includes(".spec.")?t.includes(".spec.containers")||t.includes(".spec.image")||t.includes(".spec.template")?"Container & Image":t.includes(".spec.replicas")||t.includes(".spec.scale")?"Scaling":t.includes(".spec.service")||t.includes(".spec.port")||t.includes(".spec.type")?"Service Configuration":t.includes(".spec.selector")||t.includes(".spec.matchlabels")?"Selectors & Matching":t.includes(".spec.resources")||t.includes(".spec.limits")||t.includes(".spec.requests")?"Resources":t.includes(".spec.env")||t.includes(".spec.configmap")||t.includes(".spec.secret")?"Environment & Config":t.includes(".spec.volume")||t.includes(".spec.persistentvolume")?"Storage & Volumes":t.includes(".spec.ingress")||t.includes(".spec.host")||t.includes(".spec.path")?"Networking":"Spec Changes":t.includes(".data.")||t.includes("configmap")||t.includes("secret")?"Configuration Data":r||"Other"}function p(e,r,t,o){let n=new Date().toISOString(),i="markdown"===e?"# Helm Chart Diff Report\n\n"+"**Generated:** ".concat(n,"\n")+"**Version 1:** ".concat(t.version1||"N/A","\n")+"**Version 2:** ".concat(t.version2||"N/A","\n\n"):"Helm Chart Diff Report\n"+"Generated: ".concat(n,"\n")+"Version 1: ".concat(t.version1||"N/A","\n")+"Version 2: ".concat(t.version2||"N/A","\n\n"),s="";return o&&("markdown"===e?(s="## Statistics\n\n### Summary\n"+"- Total Resources: ".concat(o.summary.totalResources,"\n")+"- Added: ".concat(o.summary.resourcesAdded,"\n")+"- Removed: ".concat(o.summary.resourcesRemoved,"\n")+"- Modified: ".concat(o.summary.resourcesModified,"\n")+"- Impact Level: ".concat(o.impact.level.toUpperCase(),"\n")+"- Lines: +".concat(o.lines.added," / -").concat(o.lines.removed,"\n\n"),o.byKind.length>0&&(s+="### Changes by Resource Kind\n\n",o.byKind.slice(0,10).forEach(e=>{s+="- **".concat(e.kind,"**: ").concat(e.count," (").concat(e.added>0?"+".concat(e.added," "):"").concat(e.removed>0?"-".concat(e.removed," "):"").concat(e.modified>0?"~".concat(e.modified):"",")\n")}),s+="\n"),o.impact.criticalChanges.length>0&&(s+="### Critical Changes\n\n",o.impact.criticalChanges.forEach(e=>{s+="- **".concat(e.resource,"** (").concat(e.kind,"): ").concat(e.field," - ").concat(e.description,"\n")}),s+="\n"),o.impact.breakingChanges.length>0&&(s+="### Breaking Changes\n\n",o.impact.breakingChanges.forEach(e=>{s+="- **".concat(e.resource,"** (").concat(e.kind,") [").concat(e.severity.toUpperCase(),"]: ").concat(e.field," - ").concat(e.description,"\n")}),s+="\n")):s="STATISTICS\n==========\n"+"Total Resources: ".concat(o.summary.totalResources,"\n")+"Added: ".concat(o.summary.resourcesAdded,"\n")+"Removed: ".concat(o.summary.resourcesRemoved,"\n")+"Modified: ".concat(o.summary.resourcesModified,"\n")+"Impact Level: ".concat(o.impact.level.toUpperCase(),"\n")+"Lines: +".concat(o.lines.added," / -").concat(o.lines.removed,"\n\n")),i+s+("markdown"===e?"## Diff Output\n\n```diff\n".concat(r,"\n```"):"DIFF OUTPUT\n============\n\n".concat(r))}function u(e,r,t){let o=new Blob([e],{type:t}),n=URL.createObjectURL(o),i=document.createElement("a");i.href=n,i.download=r,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n)}function h(e,r){e.trim();let t=e.startsWith("+++")||e.startsWith("---"),n=e.startsWith("+")&&!t,i=e.startsWith("-")&&!t,s=" ",a=e;return n?(s="+",a=e.substring(1)):i?(s="-",a=e.substring(1)):t?a=e:(a=e,s=" "),(0,o.jsxs)("div",{style:{padding:"0.25rem 1rem",background:"#1e1e1e",color:"#d4d4d4",fontFamily:'Monaco, Menlo, "Ubuntu Mono", monospace',fontSize:"0.875rem",lineHeight:"1.6",whiteSpace:"pre",overflowX:"auto"},children:[(0,o.jsx)("span",{style:{opacity:.6,marginRight:"0.5rem",userSelect:"none"},children:s}),(0,o.jsx)("span",{children:a})]},r)}function g(e){let{result:r,ignoreLabels:t=!1,secretHandling:i="suppress",contextLines:s=3,suppressKinds:a=[],suppressRegex:l}=e,d=r.diff&&r.diff.trim().length>0,c=r.diff||"";if(t&&c){let e=c.split("\n"),r=[],t=!1;for(let o=0;o<e.length;o++){let n=e[o],i=n.trim(),s=n.toLowerCase();if(s.includes("metadata.")&&n.match(/\([^)]+\/[^)]+\/[^)]+\)/)){t=!0;continue}if(t){if(i.match(/\([^)]+\/[^)]+\/[^)]+\)/)){s.includes("metadata.")||(t=!1,r.push(n));continue}if("\xb1 value change"===i||i.startsWith("-")||i.startsWith("+"))continue;if(""===i){for(let r=o+1;r<e.length&&r<o+5;r++){let o=e[r].trim();if(""!==o){o.match(/\([^)]+\/[^)]+\/[^)]+\)/)&&!e[r].toLowerCase().includes("metadata.")&&(t=!1);break}}continue}t=!1,r.push(n)}t||r.push(n)}c=r.join("\n")}let g=c;if(a&&a.length>0){let e=g.split("\n"),r=[],t=!1;for(let o of e){let e=o.match(/\(([^)]+)\)/);if(e){let r=e[1].split("/"),o=r.length>=2&&r[r.length-3]||r[0];t=a.some(e=>o.toLowerCase()===e.toLowerCase())}t||r.push(o)}g=r.join("\n")}if(l)try{let e=new RegExp(l);g=g.split("\n").filter(r=>!e.test(r)).join("\n")}catch(e){console.warn("Invalid suppress regex:",e)}"suppress"===i?g=(g=g.replace(/data:\s*([^\n]+)/gi,(e,r)=>r.includes(":")?"data: [REDACTED]":e)).replace(/value:\s*([^\n]+)/gi,(e,r)=>r.length>20||r.match(/^[A-Za-z0-9+/=]+$/)?"value: [REDACTED]":e):"decode"===i&&(g=g.replace(/value:\s*([A-Za-z0-9+/=]+)/g,(e,r)=>{try{let e=atob(r);return"value: ".concat(e," (decoded from base64)")}catch(r){return e}}));let f=d?function(e){let r=[],t=e.split("\n"),o=/\(([^)]+)\)/,n=null,i=[];for(let e=0;e<t.length;e++){let s=t[e],a=s.trim(),l=a.match(o);if(l){let e,t,o;n&&i.length>0&&(n.diff=i.join("\n"),n.lines=[...i],r.push(n));let d=l[1].split("/");3===d.length?(e=d[0],o=d[1],t=d[2]):4===d.length?(e=d[1],o=d[2],t=d[3]):(e=d[0]||"Unknown",t=d[d.length-1]||"unknown",o=d.length>2?d[1]:void 0);let c=a.split("(")[0].trim();n={category:m(c,e),path:c,kind:e,name:t,namespace:"default"===o||""===o?void 0:o,diff:"",lines:[]},i=[s]}else if(n){if(""===a&&e<t.length-1){let s=!1;for(let r=e+1;r<t.length;r++){let e=t[r].trim();if(""!==e){e.match(o)&&(s=!0);break}}if(s){n.diff=i.join("\n"),n.lines=[...i],r.push(n),n=null,i=[];continue}}i.push(s)}else(a.startsWith("+++")||a.startsWith("---"))&&(n||(n={category:"Other",path:"",kind:"Unknown",name:"all",namespace:void 0,diff:"",lines:[]}),i.push(s))}if(n&&i.length>0&&(n.diff=i.join("\n"),n.lines=[...i],r.push(n)),r.length>0)return r;let s=[],a=[];for(let e of t)("---"===e.trim()||e.match(/^---\s*$/))&&a.length>0&&(s.push(a.join("\n")),a=[]),a.push(e);for(let e of(a.length>0&&s.push(a.join("\n")),s)){if(!e.trim())continue;let t=null,o=null,n=null,i=e.split("\n");for(let e of i){let r=e.trim();if(!t&&r.match(/^[+-]?\s*kind:\s*(.+)$/i)){let e=r.match(/kind:\s*(.+)$/i);e&&(t=e[1].trim().replace(/["']/g,""))}if(t&&!o&&r.match(/^[+-]?\s*name:\s*(.+)$/i)){let e=r.match(/name:\s*(.+)$/i);e&&(o=e[1].trim().replace(/["']/g,""))}if(!n&&r.match(/^[+-]?\s*namespace:\s*(.+)$/i)){let e=r.match(/namespace:\s*(.+)$/i);e&&(n=e[1].trim().replace(/["']/g,""))}}t&&r.push({category:m("",t),path:"",kind:t,name:o||"unknown",namespace:n||void 0,diff:e,lines:i})}return 0===r.length?[{category:"All Changes",path:"",kind:"All Resources",name:"all",diff:e,lines:e.split("\n")}]:r}(g):[];if(void 0!==s&&s>=0)for(let e of f)e.lines=function(e,r){if(void 0===r||r<0)return e;let t=[],o=-1;for(let n=0;n<e.length;n++){let i=e[n].trim();if(i.startsWith("+")||i.startsWith("-")){let i=Math.max(0,n-r),s=Math.min(e.length,n+r+1);o>=0&&i>o+1&&t.push("...");for(let r=i;r<s;r++)(r>=o+1||r===n)&&t.push(e[r]);o=n}}return 0===t.length?e:t}(e.lines,s);let x=function(e){let r={},t=["Container & Image","Scaling","Resources","Service Configuration","Environment & Config","Storage & Volumes","Selectors & Matching","Configuration Data","Spec Changes","Workloads","Services","Networking","Configuration","Storage","RBAC","Policy","Autoscaling","Custom Resources","Metadata & Tags","Status","Other"];for(let t of e)r[t.category]||(r[t.category]=[]),r[t.category].push(t);let o=Object.keys(r).sort((e,r)=>{let o=t.indexOf(e),n=t.indexOf(r);return -1!==o&&-1!==n?o-n:-1!==o?-1:-1!==n?1:e.localeCompare(r)}),n={};for(let e of o)n[e]=r[e];return n}(f),y=Object.keys(x),v=d?function(e,r){let t={totalResources:0,resourcesAdded:0,resourcesRemoved:0,resourcesModified:0,resourcesUnchanged:0,totalChanges:e.length},o=new Map,n=new Map,i={added:0,removed:0,unchanged:0,total:r.split("\n").length},s=[],a=[],l=new Set;for(let r of e){let e="".concat(r.kind,"/").concat(r.name).concat(r.namespace?"/".concat(r.namespace):"");!l.has(e)&&(l.add(e),t.totalResources++),o.has(r.kind)||o.set(r.kind,{added:0,removed:0,modified:0,count:0});let d=o.get(r.kind);d.count++,n.has(r.category)||n.set(r.category,new Set),n.get(r.category).add(e);let c=!1,m=!1;for(let t of r.lines){let o=t.trim();o.startsWith("+")&&!o.startsWith("+++")?(i.added++,c=!0):o.startsWith("-")&&!o.startsWith("---")?(i.removed++,m=!0):o&&!o.startsWith("+++")&&!o.startsWith("---")&&i.unchanged++,o.includes(".spec.replicas")&&s.push({resource:e,kind:r.kind,field:"replicas",description:"Replica count changed"}),o.includes(".spec.template.spec.containers")&&o.includes("image:")&&s.push({resource:e,kind:r.kind,field:"image",description:"Container image changed"}),o.includes(".spec.resources")&&s.push({resource:e,kind:r.kind,field:"resources",description:"Resource limits/requests changed"}),o.startsWith("-")&&!o.startsWith("---")&&(o.includes("required:")||o.includes("requiredFields:"))&&a.push({resource:e,kind:r.kind,field:r.path,description:"Required field removed",severity:"high"})}c&&m?(d.modified++,t.resourcesModified++):c&&!m?(d.added++,t.resourcesAdded++):m&&!c?(d.removed++,t.resourcesRemoved++):t.resourcesUnchanged++}let d=Array.from(o.entries()).map(e=>{let[r,t]=e;return{kind:r,count:t.count,added:t.added,removed:t.removed,modified:t.modified}}).sort((e,r)=>r.count-e.count),c=Array.from(n.entries()).map(e=>{let[r,t]=e;return{category:r,count:t.size,resources:Array.from(t)}}).sort((e,r)=>r.count-e.count),m="low";return t.resourcesRemoved>0||a.length>0||s.length>5?m="high":(t.resourcesModified>0||s.length>0)&&(m="medium"),{summary:t,byKind:d,byCategory:c,lines:i,impact:{level:m,criticalChanges:s.slice(0,10),breakingChanges:a.slice(0,10)}}}(f,g):null,[b,j]=(0,n.useState)(new Set);(0,n.useEffect)(()=>{y.length>0?j(new Set(y)):j(new Set)},[r.version1,r.version2]);let C=e=>{j(r=>{let t=new Set(r);return t.has(e)?t.delete(e):t.add(e),t})},S=b.size===y.length&&y.length>0,k=0===b.size&&y.length>0;return(0,o.jsxs)("div",{style:{border:"1px solid #ddd",borderRadius:"8px",overflow:"hidden"},children:[(0,o.jsxs)("div",{style:{background:"#f5f5f5",padding:"1rem",borderBottom:"1px solid #ddd"},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem",flexWrap:"wrap",gap:"0.5rem"},children:[(0,o.jsx)("h2",{style:{fontSize:"1.5rem",margin:0,color:"#333"},children:"Comparison Results"}),(0,o.jsxs)("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[y.length>0&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:()=>{j(new Set(y))},disabled:S,style:{padding:"0.4rem 0.8rem",background:S?"#ccc":"#667eea",color:"white",border:"none",borderRadius:"4px",cursor:S?"not-allowed":"pointer",fontSize:"0.85rem",opacity:S?.5:1},children:"Expand All"}),(0,o.jsx)("button",{onClick:()=>{j(new Set)},disabled:k,style:{padding:"0.4rem 0.8rem",background:k?"#ccc":"#667eea",color:"white",border:"none",borderRadius:"4px",cursor:k?"not-allowed":"pointer",fontSize:"0.85rem",opacity:k?.5:1},children:"Collapse All"})]}),d&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:()=>{u(p("text",g,r,v),"diff.txt","text/plain")},style:{padding:"0.4rem 0.8rem",background:"#4caf50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.85rem"},title:"Download as text file",children:"\uD83D\uDCE5 Export TXT"}),(0,o.jsx)("button",{onClick:()=>{u(p("markdown",g,r,v),"diff.md","text/markdown")},style:{padding:"0.4rem 0.8rem",background:"#2196f3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.85rem"},title:"Download as markdown file",children:"\uD83D\uDCE5 Export MD"}),(0,o.jsx)("button",{onClick:async()=>{let e=p("text",g,r,v);try{await navigator.clipboard.writeText(e),alert("Diff copied to clipboard!")}catch(e){alert("Failed to copy to clipboard")}},style:{padding:"0.4rem 0.8rem",background:"#9c27b0",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.85rem"},title:"Copy to clipboard",children:"\uD83D\uDCCB Copy"})]})]})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:"1rem",fontSize:"0.9rem",color:"#666",flexWrap:"wrap"},children:[(0,o.jsxs)("span",{children:[(0,o.jsx)("strong",{children:"Version 1:"})," ",(0,o.jsx)("code",{style:{background:"#e0e0e0",padding:"0.2rem 0.5rem",borderRadius:"4px"},children:r.version1})]}),(0,o.jsxs)("span",{children:[(0,o.jsx)("strong",{children:"Version 2:"})," ",(0,o.jsx)("code",{style:{background:"#e0e0e0",padding:"0.2rem 0.5rem",borderRadius:"4px"},children:r.version2})]}),y.length>0&&(0,o.jsxs)("span",{children:[(0,o.jsx)("strong",{children:"Categories:"})," ",(0,o.jsxs)("code",{style:{background:"#e0e0e0",padding:"0.2rem 0.5rem",borderRadius:"4px"},children:[y.length," categorie",1!==y.length?"s":""]})]})]})]}),(0,o.jsx)("div",{style:{background:"#1e1e1e"},children:d?(0,o.jsx)("div",{children:y.length>0?(0,o.jsxs)("div",{children:[v&&(0,o.jsxs)("div",{style:{padding:"1.5rem",background:"#2d2d2d",borderBottom:"2px solid #444",marginBottom:"1rem"},children:[(0,o.jsxs)("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#fff",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,o.jsx)("span",{children:"\uD83D\uDCCA"})," Enhanced Statistics Dashboard"]}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[(0,o.jsxs)("div",{style:{padding:"1rem",background:"#1e1e1e",borderRadius:"6px",border:"1px solid #444"},children:[(0,o.jsx)("div",{style:{fontSize:"0.85rem",color:"#888",marginBottom:"0.25rem"},children:"Total Resources"}),(0,o.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#fff"},children:v.summary.totalResources})]}),(0,o.jsxs)("div",{style:{padding:"1rem",background:"#1e1e1e",borderRadius:"6px",border:"1px solid #444"},children:[(0,o.jsx)("div",{style:{fontSize:"0.85rem",color:"#888",marginBottom:"0.25rem"},children:"Added"}),(0,o.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#4caf50"},children:v.summary.resourcesAdded})]}),(0,o.jsxs)("div",{style:{padding:"1rem",background:"#1e1e1e",borderRadius:"6px",border:"1px solid #444"},children:[(0,o.jsx)("div",{style:{fontSize:"0.85rem",color:"#888",marginBottom:"0.25rem"},children:"Removed"}),(0,o.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#f44336"},children:v.summary.resourcesRemoved})]}),(0,o.jsxs)("div",{style:{padding:"1rem",background:"#1e1e1e",borderRadius:"6px",border:"1px solid #444"},children:[(0,o.jsx)("div",{style:{fontSize:"0.85rem",color:"#888",marginBottom:"0.25rem"},children:"Modified"}),(0,o.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#ff9800"},children:v.summary.resourcesModified})]}),(0,o.jsxs)("div",{style:{padding:"1rem",background:"#1e1e1e",borderRadius:"6px",border:"1px solid #444"},children:[(0,o.jsx)("div",{style:{fontSize:"0.85rem",color:"#888",marginBottom:"0.25rem"},children:"Impact Level"}),(0,o.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:"high"===v.impact.level?"#f44336":"medium"===v.impact.level?"#ff9800":"#4caf50"},children:v.impact.level.toUpperCase()})]}),(0,o.jsxs)("div",{style:{padding:"1rem",background:"#1e1e1e",borderRadius:"6px",border:"1px solid #444"},children:[(0,o.jsx)("div",{style:{fontSize:"0.85rem",color:"#888",marginBottom:"0.25rem"},children:"Lines Changed"}),(0,o.jsxs)("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#fff"},children:["+",v.lines.added," / -",v.lines.removed]})]})]}),v.byKind.length>0&&(0,o.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,o.jsx)("h4",{style:{fontSize:"1rem",fontWeight:"600",color:"#fff",marginBottom:"0.75rem"},children:"Changes by Resource Kind"}),(0,o.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"0.5rem"},children:v.byKind.slice(0,10).map(e=>(0,o.jsxs)("div",{style:{padding:"0.75rem",background:"#1e1e1e",borderRadius:"4px",border:"1px solid #444",fontSize:"0.875rem"},children:[(0,o.jsx)("div",{style:{color:"#fff",fontWeight:"600",marginBottom:"0.25rem"},children:e.kind}),(0,o.jsxs)("div",{style:{color:"#888",fontSize:"0.75rem"},children:["Total: ",e.count," |",e.added>0&&(0,o.jsxs)("span",{style:{color:"#4caf50"},children:[" +",e.added]}),e.removed>0&&(0,o.jsxs)("span",{style:{color:"#f44336"},children:[" -",e.removed]}),e.modified>0&&(0,o.jsxs)("span",{style:{color:"#ff9800"},children:[" ~",e.modified]})]})]},e.kind))})]}),v.impact.criticalChanges.length>0&&(0,o.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,o.jsx)("h4",{style:{fontSize:"1rem",fontWeight:"600",color:"#fff",marginBottom:"0.75rem"},children:"⚠️ Critical Changes"}),(0,o.jsx)("div",{style:{background:"#1e1e1e",borderRadius:"4px",border:"1px solid #ff9800",padding:"0.75rem",maxHeight:"200px",overflowY:"auto"},children:v.impact.criticalChanges.map((e,r)=>(0,o.jsxs)("div",{style:{padding:"0.5rem",borderBottom:r<v.impact.criticalChanges.length-1?"1px solid #333":"none",fontSize:"0.875rem"},children:[(0,o.jsxs)("div",{style:{color:"#fff",fontWeight:"500"},children:[e.resource," (",e.kind,")"]}),(0,o.jsxs)("div",{style:{color:"#888",fontSize:"0.75rem",marginTop:"0.25rem"},children:[e.field,": ",e.description]})]},r))})]}),v.impact.breakingChanges.length>0&&(0,o.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,o.jsx)("h4",{style:{fontSize:"1rem",fontWeight:"600",color:"#f44336",marginBottom:"0.75rem"},children:"\uD83D\uDEA8 Breaking Changes"}),(0,o.jsx)("div",{style:{background:"#1e1e1e",borderRadius:"4px",border:"1px solid #f44336",padding:"0.75rem",maxHeight:"200px",overflowY:"auto"},children:v.impact.breakingChanges.map((e,r)=>(0,o.jsxs)("div",{style:{padding:"0.5rem",borderBottom:r<v.impact.breakingChanges.length-1?"1px solid #333":"none",fontSize:"0.875rem"},children:[(0,o.jsxs)("div",{style:{color:"#fff",fontWeight:"500"},children:[e.resource," (",e.kind,") - ",(0,o.jsx)("span",{style:{color:"high"===e.severity?"#f44336":"medium"===e.severity?"#ff9800":"#4caf50"},children:e.severity.toUpperCase()})]}),(0,o.jsxs)("div",{style:{color:"#888",fontSize:"0.75rem",marginTop:"0.25rem"},children:[e.field,": ",e.description]})]},r))})]})]}),!v&&y.length>0&&(0,o.jsxs)("div",{style:{padding:"1.5rem",background:"#2d2d2d",borderBottom:"2px solid #444",marginBottom:"1rem"},children:[(0,o.jsxs)("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#fff",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,o.jsx)("span",{children:"\uD83D\uDCCA"})," Executive Summary"]}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[(0,o.jsxs)("div",{style:{padding:"1rem",background:"#1e1e1e",borderRadius:"6px",border:"1px solid #444"},children:[(0,o.jsx)("div",{style:{fontSize:"0.85rem",color:"#888",marginBottom:"0.25rem"},children:"Total Changes"}),(0,o.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#fff"},children:f.length})]}),(0,o.jsxs)("div",{style:{padding:"1rem",background:"#1e1e1e",borderRadius:"6px",border:"1px solid #444"},children:[(0,o.jsx)("div",{style:{fontSize:"0.85rem",color:"#888",marginBottom:"0.25rem"},children:"Categories"}),(0,o.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#fff"},children:y.length})]}),(0,o.jsxs)("div",{style:{padding:"1rem",background:"#1e1e1e",borderRadius:"6px",border:"1px solid #444"},children:[(0,o.jsx)("div",{style:{fontSize:"0.85rem",color:"#888",marginBottom:"0.25rem"},children:"Resources Affected"}),(0,o.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#fff"},children:new Set(f.map(e=>"".concat(e.kind,"/").concat(e.name))).size})]})]}),(0,o.jsxs)("div",{style:{marginTop:"1rem"},children:[(0,o.jsx)("div",{style:{fontSize:"0.9rem",fontWeight:"500",color:"#ccc",marginBottom:"0.75rem"},children:"Changes by Category:"}),(0,o.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:y.map(e=>{let r=x[e].length;return e.includes("Metadata")||e.includes("Status")||e.includes("Tags"),(0,o.jsxs)("div",{style:{padding:"0.5rem 0.75rem",background:"#1e1e1e",border:"1px solid #444",borderRadius:"4px",fontSize:"0.85rem",color:"#ccc",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,o.jsxs)("span",{style:{fontWeight:"600"},children:[e,":"]}),(0,o.jsx)("span",{style:{background:"#444",color:"#fff",padding:"0.1rem 0.4rem",borderRadius:"3px",fontSize:"0.75rem",fontWeight:"600"},children:r})]},e)})})]}),f.some(e=>!e.category.includes("Metadata")&&!e.category.includes("Status")&&!e.category.includes("Tags"))&&(0,o.jsxs)("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"#1e4620",border:"1px solid #4caf50",borderRadius:"6px",fontSize:"0.9rem",color:"#9fdf9f"},children:[(0,o.jsx)("strong",{children:"⚠️ Important:"})," This comparison includes functional changes that may affect resource behavior."]})]}),y.map(e=>{let r=x[e],t=b.has(e);return(0,o.jsxs)("div",{style:{borderBottom:"2px solid #444",marginBottom:"1rem"},children:[(0,o.jsxs)("div",{onClick:()=>C(e),style:{padding:"0.75rem 1rem",background:"#2d2d2d",borderBottom:"2px solid #444",color:"#fff",fontSize:"0.95rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",userSelect:"none",transition:"background 0.2s"},onMouseOver:e=>{e.currentTarget.style.opacity="0.9"},onMouseOut:e=>{e.currentTarget.style.opacity="1"},children:[(0,o.jsx)("span",{style:{fontSize:"1rem",transition:"transform 0.2s",transform:t?"rotate(90deg)":"rotate(0deg)",display:"inline-block"},children:"▶"}),(0,o.jsx)("span",{style:{fontSize:"1.1rem"},children:"\uD83D\uDCE6"}),(0,o.jsx)("span",{children:e}),(0,o.jsxs)("span",{style:{fontSize:"0.85rem",opacity:.8,marginLeft:"auto"},children:["(",r.length," change",1!==r.length?"s":"",")"]})]}),t&&(0,o.jsx)("div",{children:r.map((e,t)=>(0,o.jsxs)("div",{style:{borderBottom:t<r.length-1?"1px solid #333":"none"},children:[(0,o.jsx)("div",{style:{padding:"0.5rem 1rem",background:"#2d2d2d",color:"#fff",fontSize:"0.85rem",borderBottom:"1px solid #444"},children:(0,o.jsxs)("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[(0,o.jsxs)("span",{children:[(0,o.jsx)("strong",{children:"Resource:"})," ",e.kind,"/",e.name]}),e.namespace&&(0,o.jsxs)("span",{style:{opacity:.8},children:[(0,o.jsx)("strong",{children:"Namespace:"})," ",e.namespace]}),e.path&&(0,o.jsxs)("span",{style:{opacity:.8},children:[(0,o.jsx)("strong",{children:"Path:"})," ",(0,o.jsx)("code",{style:{fontSize:"0.8rem"},children:e.path})]})]})}),(0,o.jsx)("div",{style:{background:"#1e1e1e",overflowX:"auto"},children:e.lines.map((e,r)=>h(e,r))})]},t))})]},e)})]}):(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{padding:"0.75rem 1rem",background:"#2d2d2d",borderBottom:"1px solid #444",color:"#fff",fontSize:"0.9rem"},children:"⚠️ Differences detected"}),(0,o.jsx)("div",{style:{background:"#1e1e1e",overflowX:"auto"},children:(r.diff||"").split("\n").map((e,r)=>h(e,r))})]})}):(0,o.jsx)("div",{style:{padding:"2rem",textAlign:"center",color:"#4caf50",fontSize:"1.1rem"},children:"✅ No differences found between versions"})})]})}let f=[{name:"Example 1: Compare Two Release Tags",description:"Compare two ArgoCD release versions (argo-cd-9.1.5 vs argo-cd-9.1.6)",data:{repository:"https://github.com/argoproj/argo-helm.git",chartPath:"charts/argo-cd",version1:"argo-cd-9.1.5",version2:"argo-cd-9.1.6"}},{name:"Example: DataDog Helm Charts (Monorepo)",description:"Compare DataDog chart versions in monorepo structure (datadog-3.0.0 vs datadog-3.1.0)",data:{repository:"https://github.com/DataDog/helm-charts.git",chartPath:"charts/datadog",version1:"datadog-3.0.0",version2:"datadog-3.1.0"}},{name:"Example 2: With Custom Values",description:"Compare versions with custom values content",data:{repository:"https://github.com/argoproj/argo-helm.git",chartPath:"charts/argo-cd",version1:"main",version2:"main",valuesContent:'global:\n  image:\n    tag: "v2.9.0"\ncontroller:\n  replicas: 2\n  resources:\n    limits:\n      cpu: 1000m\n      memory: 1Gi\n    requests:\n      cpu: 250m\n      memory: 128Mi\nserver:\n  replicas: 2\n  resources:\n    limits:\n      cpu: 500m\n      memory: 512Mi\n    requests:\n      cpu: 100m\n      memory: 128Mi\nrepoServer:\n  replicas: 2\n  resources:\n    limits:\n      cpu: 500m\n      memory: 512Mi\n    requests:\n      cpu: 100m\n      memory: 128Mi'}},{name:"Example 3: Compare with Values File",description:"Compare ArgoCD chart configurations with custom values",data:{repository:"https://github.com/argoproj/argo-helm.git",chartPath:"charts/argo-cd",version1:"argo-cd-9.1.5",version2:"argo-cd-9.1.6",valuesContent:"controller:\n  replicas: 3\n  resources:\n    limits:\n      cpu: 2000m\n      memory: 2Gi\n    requests:\n      cpu: 500m\n      memory: 256Mi\nserver:\n  replicas: 2\n  resources:\n    limits:\n      cpu: 1000m\n      memory: 1Gi\n    requests:\n      cpu: 200m\n      memory: 256Mi\n  service:\n    type: LoadBalancer\nrepoServer:\n  replicas: 3\n  resources:\n    limits:\n      cpu: 1000m\n      memory: 1Gi\n    requests:\n      cpu: 200m\n      memory: 256Mi\nredis-ha:\n  enabled: true\n  redis:\n    resources:\n      requests:\n        memory: 256Mi\n        cpu: 100m"}}];function x(e){let{onSelectExample:r}=e;return(0,o.jsxs)("div",{style:{marginBottom:"2rem",padding:"1.5rem",background:"#f8f9fa",borderRadius:"8px",border:"1px solid #e9ecef"},children:[(0,o.jsx)("h3",{style:{fontSize:"1.25rem",marginBottom:"1rem",color:"#333",fontWeight:"600"},children:"\uD83D\uDCDA Demo Examples"}),(0,o.jsx)("p",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"1rem"},children:"Try these pre-configured examples to see how the diff viewer works:"}),(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:f.map((e,t)=>(0,o.jsxs)("button",{onClick:()=>r(e.data),style:{padding:"0.75rem 1rem",background:"white",border:"1px solid #ddd",borderRadius:"6px",textAlign:"left",cursor:"pointer",transition:"all 0.2s",fontSize:"0.9rem"},onMouseOver:e=>{e.currentTarget.style.background="#f0f0f0",e.currentTarget.style.borderColor="#667eea"},onMouseOut:e=>{e.currentTarget.style.background="white",e.currentTarget.style.borderColor="#ddd"},children:[(0,o.jsx)("div",{style:{fontWeight:"600",color:"#333",marginBottom:"0.25rem"},children:e.name}),(0,o.jsx)("div",{style:{color:"#666",fontSize:"0.85rem"},children:e.description})]},t))}),(0,o.jsxs)("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"#e7f3ff",borderRadius:"6px",fontSize:"0.85rem",color:"#0066cc"},children:[(0,o.jsx)("strong",{children:"\uD83D\uDCA1 Tip:"})," These examples use public Helm chart repositories. You can modify the values or use your own repository URLs."]})]})}function y(e){let{message:r,step:t,totalSteps:n}=e,i=t&&n?Math.round(t/n*100):0;return(0,o.jsxs)("div",{style:{marginTop:"1.5rem",padding:"1.5rem",background:"#f8f9fa",border:"1px solid #e9ecef",borderRadius:"8px"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:t&&n?"0.75rem":"0"},children:[(0,o.jsx)("div",{style:{width:"20px",height:"20px",border:"3px solid #667eea",borderTopColor:"transparent",borderRadius:"50%",animation:"spin 1s linear infinite",flexShrink:0}}),(0,o.jsx)("div",{style:{flex:1,fontSize:"1rem",color:"#333",fontWeight:"500"},children:r})]}),t&&n&&(0,o.jsx)("div",{style:{width:"100%",height:"6px",background:"#e9ecef",borderRadius:"3px",overflow:"hidden",marginTop:"0.5rem"},children:(0,o.jsx)("div",{style:{width:"".concat(i,"%"),height:"100%",background:"linear-gradient(90deg, #667eea 0%, #764ba2 100%)",transition:"width 0.3s ease",borderRadius:"3px"}})})]})}var v=t(7318);function b(){let[e,r]=(0,n.useState)(null),[t,i]=(0,n.useState)(!1),[a,d]=(0,n.useState)(null),[c,m]=(0,n.useState)(void 0),[p,u]=(0,n.useState)(""),[h,f]=(0,n.useState)(0),[b]=(0,n.useState)(7),[j,C]=(0,n.useState)("classic"),S=async e=>{i(!0),d(null),r(null),f(0);try{u("Initializing comparison..."),f(1),await new Promise(e=>setTimeout(e,100)),u("Cloning repository..."),f(2);let t=["Cloning repository...","Extracting version 1...","Extracting version 2...","Building chart dependencies...","Rendering Helm templates...","Comparing YAML differences..."],o=null,n=null;try{let i;o=setInterval(()=>{f(e=>e<6?e+1:e)},2e3);let a=0;n=setInterval(()=>{a<t.length-1&&(a++,u(t[a]))},2e3);let l=await fetch(s.compare,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});o&&clearInterval(o),n&&clearInterval(n),o=null,n=null,u("Processing results..."),f(6);try{i=await l.json()}catch(e){throw Error("Failed to parse response: ".concat(l.statusText||"Unknown error"))}if(!l.ok||!i.success){let e=(null==i?void 0:i.error)||"Failed to compare versions";throw Error(e)}u("Comparison complete!"),f(7),r(i),setTimeout(()=>{u(""),f(0)},1500)}catch(e){throw o&&clearInterval(o),n&&clearInterval(n),e}}catch(r){let e="An error occurred";"AbortError"===r.name?e="Request was cancelled":r.message?e=r.message:r instanceof TypeError&&r.message.includes("fetch")?e="Network error: Could not connect to the server. Please check your connection and try again.":r instanceof Error&&(e=r.message),d(e),u(""),f(0)}finally{i(!1)}};return(0,o.jsxs)("main",{style:{maxWidth:"1200px",margin:"0 auto",background:"white",borderRadius:"12px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)",overflow:"hidden"},children:[(0,o.jsxs)("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"2rem",color:"white"},children:[(0,o.jsx)("h1",{style:{fontSize:"2.5rem",marginBottom:"0.5rem",fontWeight:"bold"},children:"\uD83D\uDD0D Chart Impact"}),(0,o.jsx)("p",{style:{fontSize:"1.1rem",opacity:.9},children:"Compare differences between two Helm chart versions"})]}),(0,o.jsxs)("div",{style:{padding:"2rem"},children:[(0,o.jsx)(x,{onSelectExample:e=>{m(e)}}),(0,o.jsx)(l,{onSubmit:S,loading:t,initialData:c},c?JSON.stringify(c):"empty"),t&&p&&(0,o.jsx)(y,{message:p,step:h,totalSteps:b}),a&&(0,o.jsxs)("div",{style:{marginTop:"1.5rem",padding:"1.5rem",background:"#fee",border:"1px solid #fcc",borderRadius:"8px",color:"#c33"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[(0,o.jsx)("span",{style:{fontSize:"1.25rem"},children:"⚠️"}),(0,o.jsx)("strong",{style:{fontSize:"1.1rem"},children:"Error"})]}),(0,o.jsx)("div",{style:{paddingLeft:"1.75rem",fontSize:"0.95rem",lineHeight:"1.6",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:a})]}),e&&(0,o.jsxs)("div",{style:{marginTop:"2rem"},children:[(0,o.jsxs)("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem",borderBottom:"2px solid #ddd"},children:[(0,o.jsx)("button",{onClick:()=>C("classic"),style:{padding:"0.75rem 1.5rem",background:"classic"===j?"#667eea":"transparent",color:"classic"===j?"white":"#333",border:"none",borderBottom:"classic"===j?"3px solid #667eea":"3px solid transparent",cursor:"pointer",fontSize:"0.95rem",fontWeight:"600",transition:"all 0.2s",borderRadius:"4px 4px 0 0"},children:"\uD83D\uDCCA Classic View"}),(0,o.jsx)("button",{onClick:()=>C("explorer"),style:{padding:"0.75rem 1.5rem",background:"explorer"===j?"#667eea":"transparent",color:"explorer"===j?"white":"#333",border:"none",borderBottom:"explorer"===j?"3px solid #4caf50":"3px solid transparent",cursor:"pointer",fontSize:"0.95rem",fontWeight:"600",transition:"all 0.2s",borderRadius:"4px 4px 0 0"},children:"\uD83D\uDD0D Explorer"})]}),"classic"===j&&(0,o.jsx)(g,{result:e,ignoreLabels:null==c?void 0:c.ignoreLabels}),"explorer"===j&&(0,o.jsx)(v.D,{result:e})]})]})]})}},257:function(e,r,t){"use strict";var o,n;e.exports=(null==(o=t.g.process)?void 0:o.env)&&"object"==typeof(null==(n=t.g.process)?void 0:n.env)?t.g.process:t(4227)},4227:function(e){!function(){var r={229:function(e){var r,t,o,n=e.exports={};function i(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{t="function"==typeof clearTimeout?clearTimeout:s}catch(e){t=s}}();var l=[],d=!1,c=-1;function m(){d&&o&&(d=!1,o.length?l=o.concat(l):c=-1,l.length&&p())}function p(){if(!d){var e=a(m);d=!0;for(var r=l.length;r;){for(o=l,l=[];++c<r;)o&&o[c].run();c=-1,r=l.length}o=null,d=!1,function(e){if(t===clearTimeout)return clearTimeout(e);if((t===s||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(e);try{t(e)}catch(r){try{return t.call(null,e)}catch(r){return t.call(this,e)}}}(e)}}function u(e,r){this.fun=e,this.array=r}function h(){}n.nextTick=function(e){var r=Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)r[t-1]=arguments[t];l.push(new u(e,r)),1!==l.length||d||a(p)},u.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=h,n.addListener=h,n.once=h,n.off=h,n.removeListener=h,n.removeAllListeners=h,n.emit=h,n.prependListener=h,n.prependOnceListener=h,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},t={};function o(e){var n=t[e];if(void 0!==n)return n.exports;var i=t[e]={exports:{}},s=!0;try{r[e](i,i.exports,o),s=!1}finally{s&&delete t[e]}return i.exports}o.ab="//";var n=o(229);e.exports=n}()}},function(e){e.O(0,[318,971,117,744],function(){return e(e.s=2620)}),_N_E=e.O()}]);