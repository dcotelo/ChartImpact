"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[318],{7318:function(e,t,r){r.d(t,{D:function(){return B}});var i=r(7437),n=r(2265);let d={added:"#4caf50",removed:"#f44336",modified:"#ff9800",unchanged:"#9e9e9e",addedBg:"#1e4620",removedBg:"#4a1a1a",modifiedBg:"#4a3510",unchangedBg:"#2d2d2d",addedText:"#81c784",removedText:"#e57373",modifiedText:"#ffb74d",unchangedText:"#999",critical:"#f44336",high:"#ff9800",medium:"#fbc02d",low:"#4caf50",defaultImportance:"#999",primary:"#4caf50",text:"#d4d4d4",textLight:"#999",textLighter:"#666",border:"#444",borderLight:"#333",bgLight:"#2d2d2d",bgLighter:"#252525",bgLightest:"#1e1e1e",white:"#1e1e1e"},s={button:e=>({padding:"0.5rem 1rem",background:e?d.primary:d.white,color:e?d.white:d.text,border:"1px solid ".concat(d.border),borderRadius:"4px",cursor:"pointer",fontSize:"0.85rem",fontWeight:"500"}),card:{marginBottom:"1.5rem",border:"1px solid ".concat(d.border),borderRadius:"6px",overflow:"hidden"},cardHeader:{padding:"0.75rem 1rem",background:d.bgLight,borderBottom:"1px solid ".concat(d.border),fontWeight:"600"},badge:e=>({padding:"0.25rem 0.75rem",background:e,color:d.white,borderRadius:"4px",fontSize:"0.75rem",fontWeight:"600",textTransform:"uppercase"}),input:{width:"100%",padding:"0.5rem 1rem",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"6px",fontSize:"0.95rem",background:"rgba(255,255,255,0.2)",color:"white",outline:"none"},sectionHeader:{fontSize:"0.8rem",fontWeight:"600",color:d.textLighter,textTransform:"uppercase",marginBottom:"0.5rem"}};function o(e){switch(e){case"added":return d.added;case"removed":return d.removed;case"modified":return d.modified;case"unchanged":return d.unchanged;default:return d.textLight}}function a(e){switch(e){case"added":return"+";case"removed":return"-";case"modified":return"~";case"unchanged":return"=";default:return"•"}}function l(e){switch(e){case"critical":return d.critical;case"high":return d.high;case"medium":return d.medium;case"low":return d.low;default:return d.defaultImportance}}function c(e){return"".concat(e.identity.kind,"/").concat(e.identity.name,"/").concat(e.identity.namespace||"cluster")}function g(e,t,r){return e.filter(e=>{if(t.changeType.length>0&&!t.changeType.includes(e.changeType)||t.kind.length>0&&!t.kind.includes(e.identity.kind))return!1;if(t.namespace.length>0){let r=e.identity.namespace||"__cluster__";if(!t.namespace.includes(r))return!1}if(r){let t=r.toLowerCase(),i=e.identity.name.toLowerCase().includes(t),n=e.identity.kind.toLowerCase().includes(t),d=(e.identity.namespace||"").toLowerCase().includes(t);return i||n||d}return!0})}function h(e){let{message:t="No resources to display"}=e;return(0,i.jsx)("div",{style:{padding:"3rem",textAlign:"center",color:d.textLighter},children:t})}let m={margin:0,fontSize:"0.8rem",fontFamily:"monospace",color:d.text,whiteSpace:"pre-wrap",wordBreak:"break-word"},p={color:d.textLighter,fontSize:"0.75rem",marginBottom:"0.25rem"};function x(e,t){return{background:e,padding:"0.5rem",borderRadius:"4px",fontFamily:"monospace",fontSize:"0.8rem",color:t}}function u(e){let{label:t,icon:r,isActive:n,onClick:d}=e;return(0,i.jsxs)("button",{onClick:d,style:s.button(n),children:[r," ",t]})}function f(e){let{before:t,after:r}=e;return(0,i.jsxs)("div",{style:{display:"flex",gap:"1rem",fontSize:"0.85rem"},children:[void 0!==t&&(0,i.jsxs)("div",{style:{flex:1},children:[(0,i.jsx)("div",{style:p,children:"Before:"}),(0,i.jsx)("div",{style:x(d.removedBg,d.removedText),children:JSON.stringify(t,null,2)})]}),void 0!==r&&(0,i.jsxs)("div",{style:{flex:1},children:[(0,i.jsx)("div",{style:p,children:"After:"}),(0,i.jsx)("div",{style:x(d.addedBg,d.addedText),children:JSON.stringify(r,null,2)})]})]})}function y(e){let{resources:t,searchQuery:r,filters:s,selectedResource:l,onSelectResource:c}=e,h=(0,n.useMemo)(()=>t&&Array.isArray(t)?g(t,s,r):[],[t,r,s]),m=(0,n.useMemo)(()=>{let e={};return h&&Array.isArray(h)&&h.forEach(t=>{var r;if(!(null==t?void 0:null===(r=t.identity)||void 0===r?void 0:r.kind))return;let i=t.identity.kind;e[i]||(e[i]=[]),e[i].push(t)}),e},[h]),p=Object.keys(m).sort();return(0,i.jsxs)("div",{style:{padding:"1rem",height:"100%",overflow:"auto",display:"flex",flexDirection:"column"},children:[(0,i.jsxs)("div",{style:{marginBottom:"1rem",fontSize:"0.9rem",color:d.textLight,fontWeight:"500"},children:[h.length," resource",1!==h.length?"s":"",h.length!==t.length&&" (of ".concat(t.length,")")]}),p.map(e=>{let t=m[e];return(0,i.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,i.jsxs)("div",{style:{fontSize:"0.85rem",fontWeight:"600",color:d.text,marginBottom:"0.5rem",padding:"0.25rem 0.5rem",background:d.bgLight,borderRadius:"4px"},children:[e," (",t.length,")"]}),t.map(e=>{if(!(null==e?void 0:e.identity))return null;let t="".concat(e.identity.kind,"/").concat(e.identity.name),r=l===t;return(0,i.jsxs)("div",{onClick:()=>c(t),style:{padding:"0.5rem",marginBottom:"0.25rem",background:r?d.primary:d.bgLighter,color:d.text,border:"1px solid",borderColor:r?d.primary:d.border,borderRadius:"4px",cursor:"pointer",fontSize:"0.85rem",transition:"all 0.2s"},onMouseEnter:e=>{r||(e.currentTarget.style.background=d.bgLight)},onMouseLeave:e=>{r||(e.currentTarget.style.background=d.bgLighter)},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,i.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"bold",color:r?"white":o(e.changeType)},children:a(e.changeType)}),(0,i.jsx)("span",{style:{flex:1,fontWeight:"500"},children:e.identity.name})]}),e.identity.namespace&&(0,i.jsxs)("div",{style:{fontSize:"0.75rem",opacity:.7,marginTop:"0.25rem",marginLeft:"1.5rem",color:d.textLight},children:["ns: ",e.identity.namespace]}),e.changes&&e.changes.length>0&&(0,i.jsxs)("div",{style:{fontSize:"0.75rem",opacity:.7,marginTop:"0.25rem",marginLeft:"1.5rem",color:d.textLight},children:[e.changes.length," change",1!==e.changes.length?"s":""]})]},t)})]},e)}),0===h.length&&(0,i.jsx)("div",{style:{padding:"2rem",textAlign:"center",color:d.textLight,fontSize:"0.9rem"},children:"No resources match your filters or search query."})]})}function b(e){let{resources:t,searchQuery:r,filters:s,viewMode:o,onViewModeChange:a,selectedResource:l}=e,c=(0,n.useMemo)(()=>g(t,s,r),[t,r,s]),h=(0,n.useMemo)(()=>l?c.filter(e=>"".concat(e.identity.kind,"/").concat(e.identity.name)===l):c,[c,l]);return(0,i.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,i.jsxs)("div",{style:{padding:"1rem",borderBottom:"1px solid ".concat(d.border),background:d.bgLighter,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,i.jsx)(u,{label:"Tree",icon:"\uD83C\uDF33",isActive:"tree"===o,onClick:()=>a("tree")}),(0,i.jsx)(u,{label:"Table",icon:"\uD83D\uDCCA",isActive:"table"===o,onClick:()=>a("table")}),(0,i.jsx)(u,{label:"Side-by-side",icon:"↔️",isActive:"sidebyside"===o,onClick:()=>a("sidebyside")})]}),(0,i.jsxs)("div",{style:{fontSize:"0.85rem",color:d.textLight},children:[h.length," resource",1!==h.length?"s":""]})]}),(0,i.jsxs)("div",{style:{flex:1,overflow:"auto",padding:"1rem"},children:["tree"===o&&(0,i.jsx)(j,{resources:h}),"table"===o&&(0,i.jsx)(v,{resources:h}),"sidebyside"===o&&(0,i.jsx)(k,{resources:h})]})]})}function j(e){let{resources:t}=e;return(0,i.jsxs)("div",{children:[t.map(e=>{let t=c(e);return(0,i.jsxs)("div",{style:s.card,children:[(0,i.jsxs)("div",{style:{...s.cardHeader,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("span",{style:{fontWeight:"600",fontSize:"1rem"},children:[e.identity.kind," / ",e.identity.name]}),e.identity.namespace&&(0,i.jsxs)("span",{style:{marginLeft:"1rem",fontSize:"0.85rem",color:d.textLight},children:["ns: ",e.identity.namespace]})]}),(0,i.jsx)("div",{children:(0,i.jsx)("span",{style:s.badge(o(e.changeType)),children:e.changeType})})]}),e.changes&&e.changes.length>0&&(0,i.jsx)("div",{style:{padding:"1rem"},children:e.changes.map((e,t)=>(0,i.jsxs)("div",{style:{marginBottom:"0.75rem",padding:"0.75rem",background:d.bgLightest,border:"1px solid ".concat(d.borderLight),borderRadius:"4px"},children:[(0,i.jsx)("div",{style:{fontSize:"0.85rem",fontWeight:"500",color:d.text,marginBottom:"0.5rem",fontFamily:"monospace"},children:e.path}),(0,i.jsx)(f,{before:e.before,after:e.after}),e.importance&&(0,i.jsxs)("div",{style:{marginTop:"0.5rem",fontSize:"0.75rem",color:d.textLight},children:["Importance: ",(0,i.jsx)("strong",{children:e.importance})]})]},"".concat(e.path,"-").concat(e.op||t)))})]},t)}),0===t.length&&(0,i.jsx)(h,{})]})}function v(e){let{resources:t}=e;return(0,i.jsxs)("div",{style:{overflow:"auto"},children:[(0,i.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{style:{background:d.bgLight},children:[(0,i.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"2px solid ".concat(d.border)},children:"Kind"}),(0,i.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"2px solid ".concat(d.border)},children:"Name"}),(0,i.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"2px solid ".concat(d.border)},children:"Namespace"}),(0,i.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"2px solid ".concat(d.border)},children:"Change Type"}),(0,i.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"2px solid ".concat(d.border)},children:"Changes"})]})}),(0,i.jsx)("tbody",{children:t.map(e=>{let t=c(e);return(0,i.jsxs)("tr",{style:{borderBottom:"1px solid ".concat(d.borderLight),background:"cluster"===t.split("/")[2]?d.white:d.bgLightest},children:[(0,i.jsx)("td",{style:{padding:"0.75rem"},children:e.identity.kind}),(0,i.jsx)("td",{style:{padding:"0.75rem",fontWeight:"500"},children:e.identity.name}),(0,i.jsx)("td",{style:{padding:"0.75rem"},children:e.identity.namespace||"-"}),(0,i.jsx)("td",{style:{padding:"0.75rem"},children:(0,i.jsx)("span",{style:{padding:"0.25rem 0.5rem",background:function(e){switch(e){case"added":return d.addedBg;case"removed":return d.removedBg;case"modified":return d.modifiedBg;case"unchanged":return d.unchangedBg;default:return d.bgLight}}(e.changeType),color:function(e){switch(e){case"added":return d.addedText;case"removed":return d.removedText;case"modified":return d.modifiedText;case"unchanged":return d.unchangedText;default:return d.textLight}}(e.changeType),borderRadius:"4px",fontSize:"0.75rem",fontWeight:"600"},children:e.changeType})}),(0,i.jsx)("td",{style:{padding:"0.75rem"},children:e.changes?e.changes.length:0})]},t)})})]}),0===t.length&&(0,i.jsx)(h,{})]})}function k(e){let{resources:t}=e,r=(e,t,r,n,s)=>{let o=t.length>0?t.map(t=>"".concat(t.path,": ").concat(JSON.stringify("Before"===e?t.before:t.after,null,2))).join("\n\n"):"No changes";return(0,i.jsxs)("div",{style:{flex:1,padding:"1rem",...s&&{borderRight:"1px solid ".concat(d.border)},background:r},children:[(0,i.jsx)("div",{style:{fontSize:"0.85rem",fontWeight:"600",marginBottom:"0.5rem",color:n},children:e}),(0,i.jsx)("pre",{style:m,children:o})]})};return(0,i.jsxs)("div",{children:[t.map(e=>{let t=c(e),n=e.changes||[];return(0,i.jsxs)("div",{style:s.card,children:[(0,i.jsxs)("div",{style:s.cardHeader,children:[e.identity.kind," / ",e.identity.name]}),(0,i.jsxs)("div",{style:{display:"flex"},children:[r("Before",n,d.removedBg,d.removedText,!0),r("After",n,d.addedBg,d.addedText,!1)]})]},t)}),0===t.length&&(0,i.jsx)(h,{})]})}function T(e){let{resource:t}=e;return t?(0,i.jsxs)("div",{style:{padding:"1rem",height:"100%",overflow:"auto"},children:[(0,i.jsx)("div",{style:{marginBottom:"1.5rem",paddingBottom:"1rem",borderBottom:"2px solid ".concat(d.border)},children:(0,i.jsx)("h3",{style:{fontSize:"1.1rem",fontWeight:"600",margin:"0 0 0.5rem 0",color:d.text},children:"Resource Details"})}),(0,i.jsx)(S,{title:"Identity",children:(0,i.jsxs)("div",{style:{fontSize:"0.85rem",lineHeight:"1.8"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Kind:"})," ",t.identity.kind]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Name:"})," ",t.identity.name]}),t.identity.namespace&&(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Namespace:"})," ",t.identity.namespace]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"API Version:"})," ",t.identity.apiVersion]}),t.identity.uid&&(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"UID:"})," ",(0,i.jsx)("code",{style:{fontSize:"0.75rem",background:d.bgLight,padding:"0.1rem 0.3rem",borderRadius:"3px"},children:t.identity.uid})]})]})}),(0,i.jsx)(S,{title:"Change Type",children:(0,i.jsx)("div",{children:(0,i.jsx)("span",{style:{...s.badge(o(t.changeType)),padding:"0.4rem 0.8rem",fontSize:"0.85rem"},children:t.changeType})})}),(t.beforeHash||t.afterHash)&&(0,i.jsx)(S,{title:"Hashes",children:(0,i.jsxs)("div",{style:{fontSize:"0.85rem",lineHeight:"1.8"},children:[t.beforeHash&&(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Before:"})," ",(0,i.jsxs)("code",{style:{fontSize:"0.75rem",background:d.bgLight,padding:"0.1rem 0.3rem",borderRadius:"3px"},children:[t.beforeHash.substring(0,8),"..."]})]}),t.afterHash&&(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"After:"})," ",(0,i.jsxs)("code",{style:{fontSize:"0.75rem",background:d.bgLight,padding:"0.1rem 0.3rem",borderRadius:"3px"},children:[t.afterHash.substring(0,8),"..."]})]})]})}),t.summary&&(0,i.jsx)(S,{title:"Summary",children:(0,i.jsxs)("div",{style:{fontSize:"0.85rem",lineHeight:"1.8"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Total Changes:"})," ",t.summary.totalChanges]}),t.summary.byImportance&&Object.keys(t.summary.byImportance).length>0&&(0,i.jsxs)("div",{style:{marginTop:"0.5rem"},children:[(0,i.jsx)("strong",{children:"By Importance:"}),(0,i.jsx)("div",{style:{marginTop:"0.25rem",paddingLeft:"0.5rem"},children:Object.entries(t.summary.byImportance).map(e=>{let[t,r]=e;return(0,i.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[(0,i.jsx)("span",{style:{width:"8px",height:"8px",borderRadius:"50%",background:l(t),display:"inline-block"}}),(0,i.jsxs)("span",{style:{textTransform:"capitalize"},children:[t,":"]}),(0,i.jsx)("span",{children:"number"==typeof r?r:0})]},t)})})]}),t.summary.categories&&t.summary.categories.length>0&&(0,i.jsxs)("div",{style:{marginTop:"0.5rem"},children:[(0,i.jsx)("strong",{children:"Categories:"}),(0,i.jsx)("div",{style:{marginTop:"0.25rem",paddingLeft:"0.5rem"},children:t.summary.categories.map((e,t)=>(0,i.jsxs)("div",{children:["• ",e]},"".concat(e,"-").concat(t)))})]})]})}),t.changes&&Array.isArray(t.changes)&&t.changes.length>0&&(0,i.jsx)(S,{title:"Changes (".concat(t.changes.length,")"),children:(0,i.jsx)("div",{style:{overflow:"auto"},children:t.changes.map((e,t)=>{if(!e)return null;let r=e.path?"".concat(e.path,"-").concat(e.op||t):"change-".concat(t);return(0,i.jsxs)("div",{style:{marginBottom:"0.75rem",padding:"0.75rem",background:d.bgLighter,border:"1px solid ".concat(d.border),borderRadius:"4px",fontSize:"0.8rem"},children:[(0,i.jsx)("div",{style:{fontFamily:"monospace",fontWeight:"500",color:d.text,marginBottom:"0.5rem",wordBreak:"break-all"},children:e.path||"Unknown path"}),e.importance&&(0,i.jsx)("div",{style:{marginBottom:"0.5rem"},children:(0,i.jsx)("span",{style:{padding:"0.2rem 0.5rem",background:l(e.importance),color:"white",borderRadius:"3px",fontSize:"0.7rem",fontWeight:"600",textTransform:"uppercase"},children:e.importance})}),e.semanticType&&(0,i.jsxs)("div",{style:{marginBottom:"0.5rem",color:d.textLight},children:["Type: ",(0,i.jsx)("strong",{children:e.semanticType})]}),e.flags&&Array.isArray(e.flags)&&e.flags.length>0&&(0,i.jsx)("div",{style:{marginBottom:"0.5rem"},children:e.flags.map((e,t)=>(0,i.jsx)("span",{style:{display:"inline-block",padding:"0.2rem 0.4rem",background:d.bgLight,borderRadius:"3px",fontSize:"0.7rem",marginRight:"0.25rem",marginBottom:"0.25rem",color:d.text},children:e},"".concat(e,"-").concat(t)))}),e.op&&(0,i.jsxs)("div",{style:{color:d.textLight,marginBottom:"0.5rem"},children:["Operation: ",(0,i.jsx)("strong",{children:e.op})]}),(void 0!==e.before||void 0!==e.after)&&(0,i.jsxs)("div",{style:{marginTop:"0.5rem"},children:[void 0!==e.before&&(0,i.jsxs)("div",{style:{marginBottom:"0.25rem"},children:[(0,i.jsx)("div",{style:{fontSize:"0.7rem",color:d.textLight},children:"Before:"}),(0,i.jsx)("pre",{style:{margin:"0.25rem 0 0 0",padding:"0.5rem",background:d.bgLight,border:"1px solid ".concat(d.border),borderRadius:"3px",fontSize:"0.75rem",overflow:"auto",maxHeight:"100px",color:d.text},children:JSON.stringify(e.before,null,2)})]}),void 0!==e.after&&(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontSize:"0.7rem",color:d.textLight},children:"After:"}),(0,i.jsx)("pre",{style:{margin:"0.25rem 0 0 0",padding:"0.5rem",background:d.bgLight,border:"1px solid ".concat(d.border),borderRadius:"3px",fontSize:"0.75rem",overflow:"auto",maxHeight:"100px",color:d.text},children:JSON.stringify(e.after,null,2)})]})]})]},r)})})})]}):(0,i.jsx)("div",{style:{padding:"1.5rem",color:d.textLighter,textAlign:"center"},children:"Select a resource to view details"})}function S(e){let{title:t,children:r}=e;return(0,i.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,i.jsx)("div",{style:s.sectionHeader,children:t}),r]})}function L(e){let{value:t,onChange:r,filters:n,onFiltersChange:d}=e;return(0,i.jsxs)("div",{style:{display:"flex",gap:"1rem",alignItems:"center"},children:[(0,i.jsx)("div",{style:{flex:1},children:(0,i.jsx)("input",{type:"text",placeholder:"\uD83D\uDD0D Search resources, kinds, paths...",value:t,onChange:e=>r(e.target.value),style:{width:"100%",padding:"0.5rem 1rem",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"6px",fontSize:"0.95rem",background:"rgba(255,255,255,0.2)",color:"white",outline:"none"}})}),(0,i.jsxs)("div",{style:{display:"flex",gap:"0.5rem",fontSize:"0.85rem"},children:[(0,i.jsx)("button",{onClick:()=>{let e={...n};e.changeType.includes("added")?e.changeType=e.changeType.filter(e=>"added"!==e):e.changeType.push("added"),d(e)},style:{padding:"0.4rem 0.8rem",background:n.changeType.includes("added")?"#4caf50":"rgba(255,255,255,0.2)",color:"white",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"4px",cursor:"pointer",fontSize:"0.85rem"},children:"+ Added"}),(0,i.jsx)("button",{onClick:()=>{let e={...n};e.changeType.includes("removed")?e.changeType=e.changeType.filter(e=>"removed"!==e):e.changeType.push("removed"),d(e)},style:{padding:"0.4rem 0.8rem",background:n.changeType.includes("removed")?"#f44336":"rgba(255,255,255,0.2)",color:"white",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"4px",cursor:"pointer",fontSize:"0.85rem"},children:"- Removed"}),(0,i.jsx)("button",{onClick:()=>{let e={...n};e.changeType.includes("modified")?e.changeType=e.changeType.filter(e=>"modified"!==e):e.changeType.push("modified"),d(e)},style:{padding:"0.4rem 0.8rem",background:n.changeType.includes("modified")?"#ff9800":"rgba(255,255,255,0.2)",color:"white",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"4px",cursor:"pointer",fontSize:"0.85rem"},children:"~ Modified"})]})]})}function w(e){let{diffData:t}=e,r=function(e){let t=e.resources||[],r=t.filter(e=>"added"===e.changeType).length,i=t.filter(e=>"removed"===e.changeType).length,n=t.filter(e=>"modified"===e.changeType).length,d=t.length,s=0,o=0,a=0,l=0;t.forEach(e=>{if("modified"===e.changeType&&e.changes){let t=!1,r=!1,i=!1;e.changes.forEach(e=>{let r=e.path;("spec"===r||"/spec"===r||r.startsWith("spec.")||r.startsWith("spec/")||r.startsWith("/spec.")||r.startsWith("/spec/"))&&(t=!0),("high"===e.importance||"critical"===e.importance)&&(i=!0)}),!t&&e.changes.length>0&&e.changes.some(e=>{let t=e.path;return"metadata"===t||"/metadata"===t||t.startsWith("metadata.")||t.startsWith("metadata/")||t.startsWith("/metadata.")||t.startsWith("/metadata/")})&&(r=!0),t&&s++,r&&o++,i?a++:l++}});let c={};t.forEach(e=>{let t=e.identity.kind;c[t]||(c[t]={kind:t,added:0,removed:0,modified:0,total:0}),c[t].total++,"added"===e.changeType&&c[t].added++,"removed"===e.changeType&&c[t].removed++,"modified"===e.changeType&&c[t].modified++});let g=Object.values(c).sort((e,t)=>t.total-e.total).slice(0,5);return{added:r,removed:i,modified:n,total:d,specChanges:s,metadataOnlyChanges:o,impactfulChanges:a,lowRiskChanges:l,topKinds:g}}(t),n=[{label:"Added",value:r.added,color:d.added,icon:a("added")},{label:"Removed",value:r.removed,color:d.removed,icon:a("removed")},{label:"Modified",value:r.modified,color:d.modified,icon:a("modified")},{label:"Total Resources",value:r.total,color:d.primary,icon:"\uD83D\uDCE6"}];return(0,i.jsxs)("div",{style:{padding:"1rem 2rem",background:d.bgLighter,borderBottom:"1px solid ".concat(d.border)},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[(0,i.jsx)("h3",{style:{fontSize:"1.1rem",margin:0,color:d.text,fontWeight:"600"},children:"\uD83D\uDCCA Statistics Dashboard"}),(0,i.jsx)("div",{style:{fontSize:"0.8rem",color:d.textLight},children:"Overview of changes detected"})]}),(0,i.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"0.75rem",marginBottom:"1rem"},children:n.map(e=>(0,i.jsxs)("div",{style:{padding:"1rem",background:d.bgLight,border:"2px solid ".concat(e.color),borderRadius:"8px",textAlign:"center"},children:[(0,i.jsxs)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:e.color,marginBottom:"0.25rem"},children:[e.icon," ",e.value]}),(0,i.jsx)("div",{style:{fontSize:"0.85rem",color:d.textLight,fontWeight:"500"},children:e.label})]},e.label))}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"0.75rem",marginBottom:"1rem"},children:[(0,i.jsxs)("div",{style:{padding:"0.75rem",background:d.bgLight,borderRadius:"8px",border:"1px solid ".concat(d.border)},children:[(0,i.jsx)("div",{style:{fontSize:"0.7rem",textTransform:"uppercase",color:d.textLighter,fontWeight:"600",marginBottom:"0.5rem"},children:"Change Breakdown"}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsx)("span",{style:{fontSize:"0.85rem",color:d.text},children:"Spec Changes"}),(0,i.jsx)("span",{style:{padding:"0.25rem 0.5rem",background:d.modifiedBg,color:d.modifiedText,borderRadius:"4px",fontSize:"0.85rem",fontWeight:"600"},children:r.specChanges})]}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsx)("span",{style:{fontSize:"0.85rem",color:d.text},children:"Metadata Only"}),(0,i.jsx)("span",{style:{padding:"0.25rem 0.5rem",background:d.bgLightest,color:d.textLight,borderRadius:"4px",fontSize:"0.85rem",fontWeight:"600"},children:r.metadataOnlyChanges})]})]})]}),(0,i.jsxs)("div",{style:{padding:"0.75rem",background:d.bgLight,borderRadius:"8px",border:"1px solid ".concat(d.border)},children:[(0,i.jsx)("div",{style:{fontSize:"0.7rem",textTransform:"uppercase",color:d.textLighter,fontWeight:"600",marginBottom:"0.5rem"},children:"Impact Indicators"}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsx)("span",{style:{fontSize:"0.85rem",color:d.text},children:"Impactful Changes"}),(0,i.jsx)("span",{style:{padding:"0.25rem 0.5rem",background:r.impactfulChanges>0?d.high:d.bgLightest,color:r.impactfulChanges>0?d.white:d.textLight,borderRadius:"4px",fontSize:"0.85rem",fontWeight:"600"},children:r.impactfulChanges})]}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsx)("span",{style:{fontSize:"0.85rem",color:d.text},children:"Low Risk"}),(0,i.jsx)("span",{style:{padding:"0.25rem 0.5rem",background:d.bgLightest,color:d.textLight,borderRadius:"4px",fontSize:"0.85rem",fontWeight:"600"},children:r.lowRiskChanges})]})]})]})]}),r.topKinds.length>0&&(0,i.jsxs)("div",{style:{padding:"0.75rem",background:d.bgLight,borderRadius:"8px",border:"1px solid ".concat(d.border)},children:[(0,i.jsx)("div",{style:{fontSize:"0.7rem",textTransform:"uppercase",color:d.textLighter,fontWeight:"600",marginBottom:"0.5rem"},children:"Top Changed Resource Kinds"}),(0,i.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"0.5rem"},children:r.topKinds.map(e=>(0,i.jsxs)("div",{style:{padding:"0.75rem",background:d.bgLightest,borderRadius:"6px",border:"1px solid ".concat(d.borderLight)},children:[(0,i.jsx)("div",{style:{fontSize:"0.9rem",fontWeight:"600",color:d.text,marginBottom:"0.5rem"},children:e.kind}),(0,i.jsxs)("div",{style:{display:"flex",gap:"0.5rem",fontSize:"0.75rem"},children:[e.added>0&&(0,i.jsxs)("span",{style:{color:d.addedText},children:["+",e.added]}),e.removed>0&&(0,i.jsxs)("span",{style:{color:d.removedText},children:["-",e.removed]}),e.modified>0&&(0,i.jsxs)("span",{style:{color:d.modifiedText},children:["~",e.modified]})]})]},e.kind))})]}),(0,i.jsxs)("div",{style:{marginTop:"0.75rem",padding:"0.5rem 0.75rem",background:r.impactfulChanges>0?"rgba(255, 152, 0, 0.15)":"rgba(76, 175, 80, 0.15)",border:"1px solid ".concat(r.impactfulChanges>0?d.high:d.low),borderRadius:"6px",fontSize:"0.8rem",color:d.text},children:[(0,i.jsx)("strong",{children:"Quick Assessment:"})," ",r.impactfulChanges>0?"This comparison contains ".concat(r.impactfulChanges," impactful change").concat(r.impactfulChanges>1?"s":""," that should be reviewed carefully."):r.modified>0?"This appears to be a moderate change. Review the modifications for any unexpected changes.":r.added>0||r.removed>0?"Resources were added or removed. Verify this matches your expectations.":"No changes detected between versions."]})]})}function z(e,t,r){if(!e.identity)return;let i=t.filter(e=>{let t=e.trim();return t.startsWith("+")||t.startsWith("-")||t.startsWith("~")});i.length>0&&(e.changes=[{op:"replace",path:"unknown",pathTokens:["unknown"],valueType:"string",importance:"medium"}]),e.summary={totalChanges:i.length||1,categories:["general"]},r.push(e)}function B(e){let{result:t,diffData:r}=e,[s,o]=(0,n.useState)(""),[a,l]=(0,n.useState)(null),[c,g]=(0,n.useState)("tree"),[h,m]=(0,n.useState)({changeType:[],kind:[],namespace:[],importance:[]}),p=(0,n.useMemo)(()=>r||(t.structuredDiff?t.structuredDiff:t.diff?function(e,t,r){if(!e||""===e.trim())return null;let i=[],n=e.split("\n"),d=/\(([^)]+)\)/,s=null,o=[];for(let e=0;e<n.length;e++){let t=n[e],r=t.trim().match(d);if(r){let e,n;s&&o.length>0&&z(s,o,i);let d=r[1].split("/"),a="v1",l="";3===d.length?(e=d[0],l=d[1],n=d[2]):4===d.length?(a=d[0],e=d[1],l=d[2],n=d[3]):(e=d[0]||"Unknown",n=d[d.length-1]||"unknown",l=d.length>2?d[1]:""),s={identity:{apiVersion:a,kind:e,name:n,namespace:"default"===l?"":l,uid:null},changeType:"modified",changes:[]},o=[t]}else s&&o.push(t)}return s&&o.length>0&&z(s,o,i),0===i.length&&i.push({identity:{apiVersion:"v1",kind:"Generic",name:"comparison-result",namespace:"",uid:null},changeType:"modified",changes:[],summary:{totalChanges:1,categories:["general"]}}),{metadata:{engineVersion:"1.0.0-converted",compareId:"converted-".concat(Date.now()),generatedAt:new Date().toISOString(),inputs:{left:{source:"helm",version:t||"v1"},right:{source:"helm",version:r||"v2"}}},resources:i,stats:{resources:{added:0,removed:0,modified:i.length},changes:{total:i.length}}}}(t.diff,t.version1,t.version2):null),[r,t.structuredDiff,t.diff,t.version1,t.version2]),x=void 0!==r&&r!==t.structuredDiff,u=!r&&!t.structuredDiff&&t.diff&&p;return p&&p.resources?p.resources&&0!==p.resources.length?(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100vh",background:d.bgLightest,overflow:"auto"},children:[(0,i.jsxs)("div",{style:{background:d.bgLight,color:d.text,padding:"1rem 2rem",borderBottom:"2px solid ".concat(d.border),flexShrink:0},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,i.jsx)("h2",{style:{fontSize:"1.5rem",margin:0},children:"\uD83D\uDD0D Diff Explorer"}),x&&(0,i.jsx)("span",{style:{background:"rgba(255, 255, 255, 0.2)",padding:"0.25rem 0.75rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"600"},children:"DEMO MODE"}),u&&(0,i.jsx)("span",{style:{background:"rgba(255, 200, 100, 0.3)",padding:"0.25rem 0.75rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"600",color:d.text},children:"ADAPTED FROM PLAIN DIFF"})]}),(0,i.jsxs)("div",{style:{fontSize:"0.9rem",opacity:.9},children:[(0,i.jsxs)("span",{style:{marginRight:"1rem"},children:[(0,i.jsx)("strong",{children:"v1:"})," ",t.version1]}),(0,i.jsxs)("span",{children:[(0,i.jsx)("strong",{children:"v2:"})," ",t.version2]})]})]}),(0,i.jsx)(w,{diffData:p}),(0,i.jsx)(L,{value:s,onChange:o,filters:h,onFiltersChange:m})]}),(0,i.jsxs)("div",{style:{display:"flex",minHeight:"700px",flex:1},children:[(0,i.jsx)("div",{style:{width:"25%",minWidth:"350px",maxWidth:"600px",borderRight:"1px solid ".concat(d.border),background:d.bgLighter},children:(0,i.jsx)(y,{resources:p.resources,searchQuery:s,filters:h,selectedResource:a,onSelectResource:l})}),(0,i.jsx)("div",{style:{flex:1,minWidth:"400px",background:d.bgLight,padding:"0"},children:(0,i.jsx)(b,{resources:p.resources,searchQuery:s,filters:h,viewMode:c,onViewModeChange:g,selectedResource:a})}),a&&p&&p.resources&&(0,i.jsx)("div",{style:{width:"25%",minWidth:"350px",maxWidth:"500px",borderLeft:"1px solid ".concat(d.border),background:d.bgLighter},children:(0,i.jsx)(T,{resource:p.resources.find(e=>(null==e?void 0:e.identity)&&"".concat(e.identity.kind,"/").concat(e.identity.name)===a)})})]})]}):(0,i.jsxs)("div",{style:{padding:"2rem",background:d.bgLight,borderRadius:"8px",textAlign:"center"},children:[(0,i.jsx)("h3",{style:{marginBottom:"1rem",color:d.text},children:"Diff Explorer"}),(0,i.jsxs)("p",{style:{color:d.textLight},children:["No resource changes detected between the two versions.",(0,i.jsx)("br",{}),"The versions appear to be identical."]})]}):(0,i.jsxs)("div",{style:{padding:"2rem",background:d.bgLight,borderRadius:"8px",textAlign:"center"},children:[(0,i.jsx)("h3",{style:{marginBottom:"1rem",color:d.text},children:"Diff Explorer"}),(0,i.jsxs)("p",{style:{color:d.textLight,marginBottom:"1rem"},children:["No comparison data available.",(0,i.jsx)("br",{}),"Please run a comparison first."]})]})}}}]);