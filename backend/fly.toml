# fly.toml app configuration file generated for chartimpact on 2025-12-27T13:43:51Z
#
# See https://fly.io/docs/reference/configuration/ for information about how to use this file.
#

app = 'chartimpact'
primary_region = 'gru'

[build]

[http_service]
  internal_port = 8080
  force_https = true
  auto_stop_machines = 'stop'
  auto_start_machines = true
  min_machines_running = 0
  processes = ['app']

[[vm]]
  size = "shared-cpu-1x"
  memory = "512mb"
[env]
  CORS_ALLOWED_ORIGINS="https://ci.dcotelo.dev,https://*.chartimpact.pages.dev,http://localhost:3000"
  CORS_ALLOWED_METHODS="GET,POST,PUT,DELETE,OPTIONS"
  CORS_ALLOWED_HEADERS="Content-Type,Authorization"
  GIT_TERMINAL="dumb"
  GIT_ASKPASS="echo"
  GIT_SSH_COMMAND="ssh -o StrictHostKeyChecking=no"
  TEMP_DIR="/tmp/chartimpact"
  COMPARE_TIMEOUT="120"
  VERSIONS_TIMEOUT="60"
  GIT_CLONE_TIMEOUT="120"
  HELM_TIMEOUT="60"
  LOG_LEVEL="info"
  LOG_FORMAT="text"
  # DEPRECATED: DYFF_ENABLED is deprecated and will be removed in a future version
  DYFF_ENABLED="false"
  STORAGE_ENABLED="true"
  STORAGE_TYPE="disk"                # Default changed from postgres to disk
  DISK_STORAGE_DIR="/data/results"
  RESULT_TTL_DAYS="30"
  MAX_DISK_USAGE_MB="0"            # Optional limit